{{!< default}}

{{!-- This template assumes your default.hbs provides Bulma CSS and your FitVids.js script. --}}

<style>
    /* 
    This minimal, namespaced CSS block adds premium visual refinements.
    It does not create new components, only enhances them.
    */

    /* Adds a professional shadow and rounded corners to the video player */
    .video-player-wrapper {
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 1rem 3rem -1rem rgba(0, 0, 0, 0.2);
        background-color: #000; /* Black background for the player */
    }

    /* Provides the sticky behavior for the sidebar on desktop */
    .video-sidebar-sticky {
        position: -webkit-sticky; /* For Safari */
        position: sticky;
        top: 2rem;
    }
    
    /* Adds a subtle hover effect to the clickable timestamp links */
    .video-timestamp-link:hover {
        background-color: hsl(0, 0%, 98%); /* Bulma's 'is-white-ter' color */
    }
</style>

{{#post}}
<main class="section">
  <div class="container is-fluid">
    <div class="columns is-variable is-8-desktop">

      {{!-- ======== Main Content Column ======== --}}
      <div class="column is-8">
        
        {{!-- The YouTube Video Player - Wrapped for styling and FitVids.js compatibility --}}
        <div class="video-player-wrapper mb-6">
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/{{custom_excerpt}}?rel=0&color=white" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>

        {{!-- Title, Meta, and Channel Info Block --}}
        <div class="box p-5">
            {{#if tags}}
                <div class="tags mb-4">
                    {{#foreach tags limit="3"}}<a class="tag is-primary is-light" href="{{url}}">{{name}}</a>{{/foreach}}
                </div>
            {{/if}}
            <h1 class="title is-size-2-desktop is-size-3-mobile has-text-weight-bold post-title mb-4">{{title}}</h1>
            <hr class="my-5">
            {{!-- Channel & Subscribe Widget --}}
            <div class="level is-mobile">
                <div class="level-left">
                    <a href="{{primary_author.url}}" class="media is-align-items-center">
                        <figure class="media-left"><p class="image is-48x48"><img class="is-rounded" src="{{primary_author.profile_image}}" alt="{{primary_author.name}}"></p></figure>
                        <div class="media-content">
                            <p class="title is-6">{{primary_author.name}}</p>
                            <p class="subtitle is-7 has-text-grey">{{excerpt}} subscribers</p>
                        </div>
                    </a>
                </div>
                <div class="level-right">
                    <a href="#" class="button is-danger is-rounded has-text-weight-bold">
                        <span class="icon"><i class="fab fa-youtube"></i></span>
                        <span class="is-hidden-mobile">Subscribe</span>
                    </a>
                </div>
            </div>
        </div>
        
        {{!-- Main Description Box --}}
        <div class="box p-6 mt-6">
            <p class="title is-5 mb-4">Description</p>
            <div class="content is-medium gh-content">
                {{content}}
            </div>
        </div>
        
      </div>

      {{!-- ======== Sidebar Column ======== --}}
      <div class="column is-4">
        <aside class="video-sidebar-sticky">
        
          {{!-- ====================================================================== --}}
          {{!-- WIDGET 1: Manual Timestamps - EDIT THIS SECTION DIRECTLY --}}
          {{!-- ====================================================================== --}}
          {{!-- Since there is no JS, you must add your timestamps here manually. --}}
          {{!-- Just copy a `<a>` block for each new timestamp. --}}
          <div class="panel is-link mb-6">
            <p class="panel-heading">Timestamps</p>
            <div style="max-height: 45vh; overflow-y: auto;">
              <a href="https://www.youtube.com/watch?v={{custom_excerpt}}&t=0s" target="_blank" class="panel-block video-timestamp-link">
                  <span class="panel-icon"><i class="far fa-play-circle"></i></span>
                  <span class="is-flex-grow-1">Introduction</span>
                  <span class="has-text-grey is-size-7">0:00</span>
              </a>
              <a href="https://www.youtube.com/watch?v={{custom_excerpt}}&t=30s" target="_blank" class="panel-block video-timestamp-link">
                  <span class="panel-icon"><i class="far fa-play-circle"></i></span>
                  <span class="is-flex-grow-1">Core Concept</span>
                  <span class="is-size-7 has-text-grey">0:30</span>
              </a>
              <a href="https://www.youtube.com/watch?v={{custom_excerpt}}&t=125s" target="_blank" class="panel-block video-timestamp-link">
                  <span class="panel-icon"><i class="far fa-play-circle"></i></span>
                  <span class="is-flex-grow-1">First Example</span>
                  <span class="is-size-7 has-text-grey">2:05</span>
              </a>
              <a href="https://www.youtube.com/watch?v={{custom_excerpt}}&t=300s" target="_blank" class="panel-block video-timestamp-link">
                  <span class="panel-icon"><i class="far fa-play-circle"></i></span>
                  <span class="is-flex-grow-1">Advanced Technique</span>
                  <span class="is-size-7 has-text-grey">5:00</span>
              </a>
              <a href="https://www.youtube.com/watch?v={{custom_excerpt}}&t=540s" target="_blank" class="panel-block video-timestamp-link">
                  <span class="panel-icon"><i class="far fa-play-circle"></i></span>
                  <span class="is-flex-grow-1">Conclusion</span>
                  <span class="is-size-7 has-text-grey">9:00</span>
              </a>
            </div>
          </div>

          {{!-- WIDGET 2: Related Videos --}}
          {{#get "posts" filter="tags:hash-video+id:-{{id}}" limit="3" as |related|}}
            {{#if related}}
            <div class="box p-5">
              <p class="title is-5 mb-5">Related Videos</p>
                {{#foreach related}}
                  <a href="{{url}}" class="is-block mb-5">
                    <figure class="image is-16by9 mb-3"><img class="is-rounded" src="{{#if feature_image}}{{feature_image}}{{else}}https://i.ytimg.com/vi/{{custom_excerpt}}/hqdefault.jpg{{/if}}" alt="{{title}}" loading="lazy"></figure>
                    <p class="is-size-6 has-text-weight-bold">{{title}}</p>
                  </a>
                {{/foreach}}
            </div>
            {{/if}}
          {{/get}}

        </aside>
      </div>
    </div>
  </div>
</main>
{{/post}}