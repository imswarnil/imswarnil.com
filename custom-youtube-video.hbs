{{!< default}}

{{!-- This template assumes your default.hbs provides Bulma CSS and your FitVids.js script. --}}

<style>
    /*
    This minimal, namespaced CSS block adds premium visual refinements.
    It does not create new components, only enhances them.
    */
    .video-page-body {
        background-color: #f9f9f9; /* A clean, YouTube-like background */
    }

    /* Adds a professional shadow and rounded corners to the video player */
    .video-player-wrapper {
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 1rem 2.5rem -1rem rgba(0, 0, 0, 0.15);
        background-color: #000; /* Black background for the player */
    }

    /* Provides the sticky behavior for the sidebar on desktop */
    .video-sidebar-sticky {
        position: -webkit-sticky; /* For Safari */
        position: sticky;
        top: 2rem;
    }
    
    /* Adds a subtle hover effect to the clickable timestamp links */
    .video-timestamp-link:hover {
        background-color: hsl(0, 0%, 98%); /* Bulma's 'is-white-ter' color */
    }
</style>

{{#post}}
<main class="section video-page-body">
  <div class="container is-fluid">
    <div class="columns is-variable is-8-desktop">

      {{!-- ======== Main Content Column ======== --}}
      <div class="column is-8">
        
        {{!-- The YouTube Video Player - Wrapped for styling and FitVids.js compatibility --}}
        <div class="video-player-wrapper mb-5">
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/{{custom_excerpt}}?rel=0&color=white" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>

        {{!-- Title & Meta --}}
        <h1 class="title is-size-2-desktop is-size-3-mobile has-text-weight-bold post-title mb-3">{{title}}</h1>
        <div class="is-size-7 has-text-grey mb-4">
            {{!-- Example view count, you can manually add this if desired --}}
            <span>1,234,567 views</span> â€¢
            <time datetime="{{date format="YYYY-MM-DD"}}">{{date format="MMMM DD, YYYY"}}</time>
        </div>
        <hr class="mt-4 mb-5">

        {{!-- Channel Info & Subscribe Button --}}
        <div class="level is-mobile mb-6">
            <div class="level-left">
                <a href="{{primary_author.url}}" class="media is-align-items-center">
                    <figure class="media-left"><p class="image is-48x48"><img class="is-rounded" src="{{primary_author.profile_image}}" alt="{{primary_author.name}}"></p></figure>
                    <div class="media-content">
                        <p class="title is-6">{{primary_author.name}}</p>
                        <p class="subtitle is-7 has-text-grey">{{excerpt}} subscribers</p>
                    </div>
                </a>
            </div>
            <div class="level-right">
                <a href="#" class="button is-dark is-rounded has-text-weight-bold">Subscribe</a>
            </div>
        </div>
        
        {{!-- Main Description Box --}}
        <div class="box has-background-light p-5">
            <div class="content is-medium gh-content">
                {{content}}
            </div>
        </div>
        
      </div>

      {{!-- ======== Sidebar Column ======== --}}
      <div class="column is-4">
        <aside class="video-sidebar-sticky">
        
          {{!-- ====================================================================== --}}
          {{!-- WIDGET 1: Manual Timestamps - EDIT THIS SECTION DIRECTLY --}}
          {{!-- ====================================================================== --}}
          <div class="panel is-link mb-6">
            <p class="panel-heading">Timestamps</p>
            <div style="max-height: 45vh; overflow-y: auto;">
              {{!-- To add a timestamp, copy a line and edit the href, title, and time. --}}
              <a href="https://www.youtube.com/watch?v={{custom_excerpt}}&t=0s" target="_blank" class="panel-block video-timestamp-link">
                  <span class="panel-icon"><i class="far fa-play-circle"></i></span>
                  <span class="is-flex-grow-1">Introduction</span>
                  <span class="has-text-grey is-size-7">0:00</span>
              </a>
              <a href="https://www.youtube.com/watch?v={{custom_excerpt}}&t=30s" target="_blank" class="panel-block video-timestamp-link">
                  <span class="panel-icon"><i class="far fa-play-circle"></i></span>
                  <span class="is-flex-grow-1">Core Concept</span>
                  <span class="has-text-grey is-size-7">0:30</span>
              </a>
              <a href="https://www.youtube.com/watch?v={{custom_excerpt}}&t=125s" target="_blank" class="panel-block video-timestamp-link">
                  <span class="panel-icon"><i class="far fa-play-circle"></i></span>
                  <span class="is-flex-grow-1">First Example</span>
                  <span class="has-text-grey is-size-7">2:05</span>
              </a>
            </div>
          </div>

          {{!-- WIDGET 2: Related Videos --}}
          {{#get "posts" filter="tags:hash-video+id:-{{id}}" limit="5" as |related|}}
            {{#if related}}
            <div class="related-videos-container">
              <p class="title is-5 mb-4">Up next</p>
                {{#foreach related}}
                  {{!-- The classic YouTube rectangular thumbnail layout --}}
                  <a href="{{url}}" class="media mb-4">
                    <figure class="media-left">
                      <p class="image is-128x72">
                        {{!-- NO is-rounded class for a clean, sharp look --}}
                        <img src="{{#if feature_image}}{{feature_image}}{{else}}https://i.ytimg.com/vi/{{custom_excerpt}}/hqdefault.jpg{{/if}}" alt="{{title}}" loading="lazy" style="border-radius: 8px;">
                      </p>
                    </figure>
                    <div class="media-content">
                      <p class="is-size-6 has-text-weight-bold" style="line-height: 1.3;">{{title}}</p>
                      <p class="is-size-7 has-text-grey mt-1">{{primary_author.name}}</p>
                    </div>
                  </a>
                {{/foreach}}
            </div>
            {{/if}}
          {{/get}}

        </aside>
      </div>
    </div>
  </div>
</main>
{{/post}}